<?php
defined( '_JEXEC' ) or die( 'Restricted access' );

class Books {
   public $zero = array(
    "Grade R package"=>array("Grade R fixed package"=>0)
    );
	
   public $one = array(
    "Teachers Manual"=>array("Parents Guide Gr 1 - 7"=>30),

    "READING BOOKS"=>array("Read - Write & Spell 1 / CD"=>45, "Clonard Reading Book 1"=>20, "Clonard Reading Book 2"=>20, "10 Clonard Phonetic Readers"=>150, "8 Little Green Readers"=>20, "7 Big Green Readers"=>30, "8 Little Red Readers"=>20, "6 Big Red Readers"=>25),

    "ADDITIONAL MATERIAL"=>array("Counters"=>15, "Bean Bag"=>10)
    );
	
    public $two = array(
    "Teachers Manual"=>array("Parents Guide Gr 1 - 7"=>30),

    "READING BOOKS"=>array("Read - Write and Spell Book 2/CD"=>50, "Clonard Reading Book 1"=>25, "Clonard Reading Book 2"=>25, "Clonard Reading Book 3"=>30, "10 Clonard Phonetic Readers"=>150, "4 Big Blue Readers"=>35, "1 Big Yellow Reader"=>20, "8 Little Blue Readers"=>20, "8 Little Yellow Readers"=>20),

    "WORK BOOKS"=>array("Afrikaans Woordeskat"=>20),

    "ADDITIONAL MATERIAL"=>array("Counters"=>15, "Bean Bag"=>10)
    );
	
    public $three = array(
    "Teachers Manual"=>array("Parents Guide Gr 1 - 7"=>30),

    "READING BOOKS"=>array("Read - Write and Spell Book 2 / CD"=>50, "10 Clonard Phonetic Readers"=>180, "1 Big Orange Reader"=>20, "8 Little Brown Readers"=>20, "8 Little Orange Readers"=>20),

	"TEXTBOOKS"=>array("Comprehensive English Practice"=>80, "Classroom Mathematics"=>45, "Classroom Mathematics 1 Answer Guide"=>15, "Modern Basic Mathematics"=>30, "Modern Basic Mathematics Answer Guide"=>15, "Afrikaans Woordeskat"=>20)
    );
	
    public $four = array(
    "Teachers Manual"=>array("Parents Guide Gr 1 - 7"=>30),

    "ENGLISH"=>array("Comprehensive English Practice"=>70),

    "AFRIKAANS"=>array("Afrikaans Supplementary Gr 4 - 7"=>15, "Nuwe Afrikaans Sonder Grense"=>60, "Antwoorde vir Nuwe Afrikaans Sonder Grense"=>15),

	"MATHS"=>array("Classroom Mathematics 2"=>120, "Working through Classroom Mathematics"=>25, "Instamaths"=>40),
	
    "SCIENCES"=>array("Shuters Natural Sciences"=>50, "Natural Sciences Work Schedule & Supplementary Notes"=>15, "Geography Manual"=>25, "Answer Guide to Geography Manual"=>15)
    );
	
    public $five = array(
    "Teachers Manual"=>array("Parents Guide Gr 1 - 7"=>30),

    "ENGLISH"=>array("English Grammar Gr 4 - 9"=>35, "English Language Gr 4 - 9"=>35, "Comprehensive English Practice"=>80),

    "AFRIKAANS"=>array("Afrikaans Taalleer Gr 4 - 9"=>35, "Afrikaans Woordeskat Gr 4 - 7"=>20, "Afrikaans Supplementary Gr 4 - 7"=>15, "Nuwe Afrikaans Sonder Grense"=>60, "Antwoorde vir Nuwe Afrikaans Sonder Grense"=>15),

	"MATHS"=>array("Classroom Mathematics 4"=>40, "Working through Classroom Mathematics"=>30, "Instamaths"=>45),
	
    "SCIENCES"=>array("Shuters Natural Sciences"=>50, "Natural Sciences Work Schedule & Supplementary Notes"=>25, "Geography Manual"=>25, "Answer Guide to Geography Manual"=>15, "Geography Map work"=>15)
    );
	
    public $six = array(
    "Teachers Manual"=>array("Parents Guide Gr 1 - 7"=>30),

    "ENGLISH"=>array("English Grammar Gr 4 - 9"=>35, "English Language Gr 4 - 9"=>35,  "Comprehensive English Practice"=>90),

    "AFRIKAANS"=>array("Afrikaans Taalleer Gr 4 - 9"=>35, "Afrikaans Woordeskat Gr 4 - 7"=>20, "Afrikaans Supplementary Gr 4 - 7"=>15, "Nuwe Afrikaans Sonder Grense"=>65, "Antwoorde vir Nuwe Afrikaans Sonder Grense"=>15),

	"MATHS"=>array("Classroom Mathematics 4"=>50, "Working through Classroom Mathematics Part 1"=>25, "Working through Classroom Mathematics Part 2"=>25, "Instamaths"=>45),
	
    "SCIENCES"=>array("Shuters Natural Sciences"=>50, "Natural Sciences Work Schedule & Supplementary Notes"=>25, "Geography Manual"=>25, "Answer Guide to Geography Manual"=>15)
    );
	
    public $seven = array(
    "Teachers Manual"=>array("Parents Guide Gr 1 - 7"=>30),

    "ENGLISH"=>array("English Grammar Gr 4 - 9"=>35, "English Language Gr 4 - 9"=>35,  "English in Context"=>80, "The Runaways"=>80),

    "AFRIKAANS"=>array("Afrikaans Taalleer Gr 4 - 9"=>35, "Afrikaans Woordeskat Gr 4 - 7"=>20, "Afrikaans Supplementary Gr 4 - 7"=>15, "Nuwe Afrikaans Sonder Grense"=>70, "Antwoorde vir Nuwe Afrikaans Sonder Grense"=>15),

	"MATHS"=>array("Modern Basic Maths"=>50, "Working through Modern Basic Mathematics part 1"=>25, "Working through Modern Basic Mathematics part 2"=>25,  "Modern Basic Mathematics  Answers"=>15, "Instamaths"=>45),
	
    "SCIENCES"=>array("General Science in Action 5"=>40, "Answer Guide to General Science in Action & Physical Science"=>15, "Answer Guide to General Science in Action & Biology"=>15, "Geography Manual"=>30, "Answer Guide to Geography Manual"=>15)
    );
	
    public $eight = array(
    "COMPULSORY EXAM SUBJECTS"=>array("English Grammar Gr 4 - 9"=>35, "English Language Gr 4 - 9"=>35, "English in Context"=>90, "English in Context Answer Book"=>15, "English for the Secondary School"=>40, "The Runaways"=>80, "Afrikaans Taalleer 4 - 9"=>35, "Afrikaans Woordeskat Gr 8 - 9"=>20, "Afrikaans Supplementary Gr 8 - 9"=>15, "Nuwe Afrikaans Sonder Grense"=>100, "Antwoorde vir Nuwe Afrikaans Sonder Grense"=>15, "Letterkunde"=>15, "Spot-On Mathematics"=>80, "Spot-On Mathematics Answer Guide"=>20, "Instamaths"=>45, "Natural Sciences"=>25,  "Natural Sciences Teachers Handbook"=>20, "Economic & Mangement Sciences"=>45, "EMS Teachers Guide"=>25),
	
    "CHOICE EXAM SUBJECT"=>array("Physical Science"=>array("Physical Science"=>25, "Physical Science Supplementary Book"=>15), "History"=>array("Learning Station Social Sciences Learners Book"=>95, "History Teachers Guide"=>20), "Geography"=>array("Mapwork Made Easy Learners Guide"=>100, "Mapwork Made Easy Teachers Guide"=>100, "Learning Station Social Sciences Learners Book"=>95, "Geography Supplementary Book for Learning Station Social Science"=>20), "Agriculture"=>array("Agricultural Science in Action"=>30), "Accounting"=>array("Accounting Textbook - A Logical Approach"=>30, "Accounting Key - A Logical Approach"=>30), "Home Economics"=>array("Home Economics Book"=>20)),

    "NON-EXAM SUBJECTS"=>array("Technology Workbook"=>15, "Social Science Assessment Workbook"=>15),
	
    "INTEREST SUBJECTS/BOOKS"=>array("Touch Typing for Beginners"=>15)
    );
	
    public $nine = array(
    "COMPULSORY EXAM SUBJECTS"=>array("English Grammar Gr 4 - 9"=>35, "English Language Gr 4 - 9"=>35, "English in Context"=>90, "English in Context Answer Book"=>20, "Working through Poetry"=>20, "Afrikaans Taalleer 4 - 9"=>35, "Afrikaans Woordeskat Gr 8 - 9"=>20, "Afrikaans Supplementary Gr 8 - 9"=>15, "Nuwe Afrikaans Sonder Grense"=>90, "Antwoorde vir Nuwe Afrikaans Sonder Grense"=>15, "Letterkunde"=>15, "Spot-On Mathematics"=>95, "Spot-On Mathematics Answer Guide"=>35, "Oxford Natural Sciences"=>75, "Oxford Successful Natural Sciences & Supplementary Book"=>20, "Economic & Mangement Sciences"=>45, "EMS Teachers Guide"=>25),
	
    "CHOICE EXAM SUBJECT"=>array("Physical Science"=>array("Physical Science"=>20, "Physical Science Supplementary Book"=>20), "History"=>array("Learning Station Social Sciences Learners Book"=>95, "History Teachers Guide"=>25), "Geography"=>array("Mapwork Made Easy Learners Guide"=>100, "Mapwork Made Easy Teachers Guide"=>100, "Learning Station Social Sciences Learners Book"=>95, "Geography Supplementary Book for Learning Station Social Science"=>25), "Agriculture"=>array("Agricultural Science in Action"=>25), "Accounting"=>array("Accounting Textbook - A Logical Approach"=>45, "Accounting Key - A Logical Approach"=>45), "Home Economics"=>array("Home Economics Book"=>20)),

    "NON-EXAM SUBJECTS"=>array("Technology Workbook"=>20, "Social Science Assessment Workbook"=>20),
	
    "INTEREST SUBJECTS/BOOKS"=>array("Touch Typing for Beginners"=>15)
    );

    public $html = '';
	

    function addTitle($title)
	{
	    $header = "<h2>".ucwords(strtolower($title))."</h2>";
        $this->html .= $header;		
	}
	
    function addBody($books)
	{
	  if (is_array($books) && !empty($books)) 
	  { 
       $table = '<table class="booktable">';
 
	    foreach($books as $book=>$price) 
		{
		  if (is_array($price)) 
		  {
		      $session = JFactory::getSession();
			  $children = $session->get('children');
			  $currentChild = $children[$session->get('current')]; 
			  
		      $choice = $currentChild['choice'];
		      $choicebooks = $books[$choice];
			  
		      foreach($choicebooks as $title=>$cost) { 
		         $table .= '<tr><td><input type="checkbox" name="books[]" class="bookcheck" value="'. $title .'" /></td>';
                 $table .= '<td><span class="pricetag" >- R' . $cost .'</span></td>';
                 $table .= '<td><span class="booktitle">'. $title .'</span></td></tr>';				 
			  }
			  
	          $table .= '</table>';
	          $this->html .= $table;
			  
			  return;
		  }
		  else {
	          if ($price === 0) 
		      {
		          $desable = ' disabled="disabled" ';
			      $pformat = '&nbsp;';
		      }		  
		      else 
		      {
		          $desable = '';
			      $pformat = '- R'. $price;
		      }
	          $table .= '<tr><td><input type="checkbox"' . $desable . ' name="books[]" class="bookcheck" value="'. $book .'" /></td>';		   
              $table .= '<td><span class="pricetag" >' . $pformat .'</span></td>';
		      $table .= '<td><span class="booktitle">'. $book .'</span></td></tr>';
	      }
        }		
	    $table .= '</table>';
	    $this->html .= $table;
      }	  
	}

	function getHTML($grade)
	{
	    $grades = array(
		    'Grade R' => 'zero', 
			'Grade 1'=> 'one', 
			'Grade 2'=> 'two', 
			'Grade 3'=> 'three', 
			'Grade 4'=>  'four', 
			'Grade 5'=> 'five', 
			'Grade 6'=> 'six', 
			'Grade 7'=> 'seven', 
			'Grade 8'=> 'eight', 
			'Grade 9'=> 'nine'
		);
		
		$localgrade = $this->{$grades[$grade]};
		
        foreach($localgrade as $title=>$books) {
            $this->addTitle($title);
	        $this->addBody($books);
		}
		
		return $this->html;
	}
}